# 🚗 Telegram Parking Bot

Це Telegram-бот для управління паркомісцями, орендою та ролями користувачів. Працює на базі **NestJS**, **TypeORM** та **grammy** з підтримкою сесій, мультимовності та ролей (власник, орендар, охоронець, адміністратор).

## 📦 Функціонал

- 🔐 Реєстрація з вибором мови та ролі (OWNER, RENTER, GUARD)
- 🏠 Додавання адреси (власником)
- 🅿️ Додавання паркомісць до адрес
- 👥 Призначення охоронців для адрес
- 🔍 Пошук паркомісць по назві вулиці (ренторами)
- 📝 Оренда паркомісця з подачею заявки
- 💵 Підтвердження готівкової оплати (власником)
- 👮‍♂️ Перевірка автомобіля по номеру охоронцем
- 💰 Вивід коштів з балансу
- 📊 Адмін-команди для статистики та підтвердження заявок

## 🛠️ Стек

- **NestJS** — бекенд фреймворк
- **TypeORM** — ORM для PostgreSQL
- **grammy** — Telegram бот-фреймворк
- **@grammyjs/hydrate** — зручне розширення `ctx`
- **session** — збереження стану діалогу
- **PostgreSQL** — основна база даних

## 📁 Структура проекту

```
src/
├── telegram/
│   ├── telegram.module.ts
│   ├── telegram.service.ts
│   ├── session.ts
│   ├── types.ts
│   ├── bot_messages.ts
│   ├── commands/
│   │   ├── start.command.ts
│   │   ├── language.command.ts
│   │   ├── ...
│   ├── handlers/
│   │   ├── text.handler.ts
│   │   ├── ...
├── user/
├── address/
├── request/
├── entities/
```

## 🧪 Запуск

1. Встанови залежності:
   ```bash
   npm install
   ```

2. Створи `.env` файл:
   ```
   BOT_TOKEN=токен_твоєї_бота
   DATABASE_URL=postgres://user:pass@localhost:5432/parking
   ```

3. Запусти:
   ```bash
   npm run start:dev
   ```

## 🚦 Ролі

| Роль        | Опис |
|-------------|------|
| `OWNER`     | Додає адреси, паркомісця, підтверджує оплату |
| `RENTER`    | Шукає місця, надсилає запити |
| `GUARD`     | Перевіряє автомобілі за номером |
| `ADMIN`     | Має доступ до статистики та ручного підтвердження заявок |

## 💡 Ідеї для майбутніх оновлень

- Верифікація за номером авто
- Оплата через Telegram Payments
- Повідомлення власнику про нові заявки
- Панель адміністратора (Web)
- Історія оренд

## 📄 Ліцензія

MIT © Danylo Pavenko